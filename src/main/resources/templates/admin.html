<!DOCTYPE html>
<html lang="en">
  <html xmlns:th="http://www.thymeleaf.org" lang="">
    <head>
      <meta charset="utf-8" />
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
      />
      <title>All Users</title>
      <link
              rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      />
    </head>

    <body>
    <nav class="navbar navbar-light bg-light justify-content-between">
      <a class="navbar-brand" style="padding-left: 5%" href="/chat"
      >Simple chat</a
      >
      <form class="form-inline">
        <button
                th:onclick="|window.location.href='/chat'|"
                class="btn btn-outline-success my-2 my-sm-0"
                type="button"
        >
          Chat
        </button>
        <button
                th:onclick="|window.location.href='/user'|"
                class="btn btn-outline-success my-2 my-sm-0"
                type="button"
        >
          My profile
        </button>
        <button
                th:onclick="|window.location.href='/auth/logout'|"
                class="btn btn-outline-success my-2 my-sm-0"
                type="button"
        >
          Exit
        </button>
      </form>
    </nav>
    <div class="col-md-12 search-table-col">
        <span class="counter pull-right"></span>
        <div class="table-responsive table table-hover table-bordered results">
          <table class="table table-bordered table-hover">
            <thead class="bill-header cs">
              <tr>
                <th class="col-lg-3">Username</th>
                <th class="col-lg-2">Role</th>
                <th class="col-lg-2">Status</th>
                <th class="col-lg-2">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="user,state : ${users}">
                <td>
                  <label th:id="'label-username' + ${state.index}" th:utext="${user.username}">username</label>
                </td>
                <td>
                  <label th:id="'label-role' + ${state.index}" th:utext="${user.role}">role</label>
                  <button
                    th:onclick="|changeRole(${state.index})|"
                    class="btn btn-success"
                    style="margin-left: 5px; background: rgb(230, 221, 7)"
                    type="button"
                  >
                    Change
                  </button>
                </td>
                <td>
                  <label th:id="'label-status' + ${state.index}" th:utext="${user.status}">status</label>
                  <button
                    th:onclick="|changeStatus(${state.index})|"
                    class="btn btn-success"
                    style="margin-left: 5px; background: rgb(230, 221, 7)"
                    type="button"
                  >
                    Change
                  </button>
                </td>
                <td>
                  <button
                    th:onclick="|saveChange(${state.index})|"
                    class="btn btn-success"
                    style="margin-left: 5px"
                    type="submit"
                  >
                    Save</button
                  >
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script src="/js/edit.js"></script>
    <script>
    </script>
    </body>
  </html>
</html>
